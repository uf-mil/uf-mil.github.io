<!DOCTYPE html>
<!-- Some pieces of this template were used from https://github.com/Rapptz/discord.py/blob/master/docs/_templates/layout.html -->
<html>
    <head>
        <!-- HTML meta -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale: 1.0">
        <title>mil_usb_to_can - USB to CAN Communication</title>
        <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
        <link rel="stylesheet" href="../_static/codeblocks.css" type="text/css" />
        <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
        <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../searchindex.js" defer></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/custom.js"></script>
        <script src="../_static/sidebar.js"></script>
        <script src="../_static/lightdarkmode.js"></script>
        <link rel="shortcut icon" href="../_static/mil_white.svg"/>
        <link rel="index" title="Index" href="../genindex.html" />
        <link rel="search" title="Search" href="../search.html" />
        <link rel="next" title="Computer Vision" href="vision.html" />
        <link rel="prev" title="mil_passive_sonar - Passive Sonar" href="passivesonar.html" />
    </head>
    <body>
        <div class="main-grid">
            <header class="grid-item">
                <nav>
                    <a class="main-heading" href="../index.html">Machine Intelligence Lab</a>
                    <div id="mil-light-dark-icon" onClick="rotateLightDark();">
                        <span class="material-icons" title=""></span>
                    </div>
                    <a href="https://github.com/uf-mil/mil" target="_blank"><img class="mil-svg" src="../_static/github.svg" /></a>
                    <a href="https://mil.ufl.edu" target="_blank"><img class="mil-svg" src="../_static/mil.svg" /></a>
                </nav>
            </header>
            <aside class="grid-item">
                <span id="hamburger-toggle">
                    <span class="material-icons">menu</span>
                </span>
                <div id="sidebar"><form id="search-form" role="search" class="search" action="../search.html" method="get">
    <div class="search-wrapper">
        <input type="search" name="q" placeholder="Search documentation" />
        <button type="submit" onmousedown="searchBarClick(event, document.getElementById('search-form'));">
            <span class="material-icons">search</span>
        </button>
    </div>
</form>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../welcome.html">Welcome to MIL!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mechanical/index.html">Mechanical</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electrical/index.html">Electrical</a></li>
<li class="toctree-l1"><a class="reference internal" href="../software/index.html">Software</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subjugator/index.html">SubjuGator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigator/index.html">NaviGator</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Software Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="messages.html">Messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="services.html">Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l2"><a class="reference internal" href="exceptions.html">Exceptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="mathematics.html">Mathematics</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html">User Input/Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html#file-input-output">File Input/Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="io.html#sanitization">Sanitization</a></li>
<li class="toctree-l2"><a class="reference internal" href="images.html">Images</a></li>
<li class="toctree-l2"><a class="reference internal" href="serial.html">Serial</a></li>
<li class="toctree-l2"><a class="reference internal" href="msghandlers.html">Message Handlers</a></li>
<li class="toctree-l2"><a class="reference internal" href="axros/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">axros</span></code> - Independent extensions for ROS</a></li>
<li class="toctree-l2"><a class="reference internal" href="mission/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mil_missions</span></code> - Mission System</a></li>
<li class="toctree-l2"><a class="reference internal" href="rviz.html">rviz</a></li>
<li class="toctree-l2"><a class="reference internal" href="pcodar.html"><code class="docutils literal notranslate"><span class="pre">pcodar</span></code> - Point Cloud Object Detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="resources.html">Resource Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="rc.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">remote_control_lib</span></code> - Remote Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="alarms.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">ros_alarms</span></code> - Stateful Alarm System</a></li>
<li class="toctree-l2"><a class="reference internal" href="pathplanning.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">lqrrt</span></code> - Path Planning</a></li>
<li class="toctree-l2"><a class="reference internal" href="battery.html">Battery Monitor</a></li>
<li class="toctree-l2"><a class="reference internal" href="passivesonar.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mil_passive_sonar</span></code> - Passive Sonar</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mil_usb_to_can</span></code> - USB to CAN Communication</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#packet-format">Packet Format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#checksums">Checksums</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packet-listing">Packet Listing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#candevicehandle">CANDeviceHandle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#simulatedcandevicehandle">SimulatedCANDeviceHandle</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packet">Packet</a></li>
<li class="toctree-l3"><a class="reference internal" href="#specific-packets">Specific Packets</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#nackpacket">NackPacket</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ackpacket">AckPacket</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vision.html">Computer Vision</a></li>
<li class="toctree-l2"><a class="reference internal" href="poi.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mil_poi</span></code> - POI Handling</a></li>
<li class="toctree-l2"><a class="reference internal" href="pneumatic.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mil_pneumatic_actuator</span></code> - Pneumatic Actuator Board</a></li>
<li class="toctree-l2"><a class="reference internal" href="sabertooth.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">sabertooth2x12</span></code> - Sabertooth 2x12</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../subjugator/reference.html">Subjugator Software Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigator/reference.html">Navigator Software Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/index.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../culture.html">Culture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../branding.html">Branding</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testingprocedures.html">Testing Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated.html">Deprecated Projects</a></li>
</ul>

                </div>
            </aside>
            <main class="grid-item" role="main">
                
  <section id="module-mil_usb_to_can">
<span id="mil-usb-to-can-usb-to-can-communication"></span><h1><a class="reference internal" href="#module-mil_usb_to_can" title="mil_usb_to_can"><code class="xref py py-mod docutils literal notranslate"><span class="pre">mil_usb_to_can</span></code></a> - USB to CAN Communication<a class="headerlink" href="#module-mil_usb_to_can" title="Permalink to this heading">¶</a></h1>
<section id="packet-format">
<h2>Packet Format<a class="headerlink" href="#packet-format" title="Permalink to this heading">¶</a></h2>
<p>In order to reliably communicate with the USB to CAN board, a consistent packet format
must be defined.</p>
<p>Below is the USBtoCAN Packet Format. This packet format wraps every message being
sent over the serial connection to the USB to CAN board from ROS.</p>
<div class="table-wrapper"><table class="docutils align-default" id="id1">
<caption><span class="caption-text">USBtoCAN Packet Format</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Length</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Sync character 1 (<code class="docutils literal notranslate"><span class="pre">0x37</span></code>)</p></td>
<td><p>1 byte</p></td>
<td><p>First sync character indicating the start of packets.</p></td>
</tr>
<tr class="row-odd"><td><p>Sync character 2 (<code class="docutils literal notranslate"><span class="pre">0x01</span></code>)</p></td>
<td><p>1 byte</p></td>
<td><p>Second sync character indicating the start of packets.</p></td>
</tr>
<tr class="row-even"><td><p>Class ID</p></td>
<td><p>1 byte</p></td>
<td><p>Message class. Determines the family of messages the packet belongs to.</p></td>
</tr>
<tr class="row-odd"><td><p>Subclass ID</p></td>
<td><p>1 byte</p></td>
<td><p>Message subclass. In combination with class, determines specific qualities
of message.</p></td>
</tr>
<tr class="row-even"><td><p>Payload Length</p></td>
<td><p>2 bytes</p></td>
<td><p>Length of payload.</p></td>
</tr>
<tr class="row-odd"><td><p>Payload</p></td>
<td><p>0-65535 bytes</p></td>
<td><p>Payload. Meaning of payload is determined by specific packet class/subclass.</p></td>
</tr>
<tr class="row-even"><td><p>Checksum A</p></td>
<td><p>1 byte</p></td>
<td><p>First byte of Fletcher’s checksum.</p></td>
</tr>
<tr class="row-odd"><td><p>Checksum B</p></td>
<td><p>1 byte</p></td>
<td><p>Second byte of Fletcher’s checksum.</p></td>
</tr>
</tbody>
</table>
</div></section>
<section id="checksums">
<h2>Checksums<a class="headerlink" href="#checksums" title="Permalink to this heading">¶</a></h2>
<p>All messages contain a checksum to help verify data integrity. However, receiving
packets also have a special byte containing a slightly modified checksum formula.</p>
<p>The checksum in all packets is found by adding up all bytes in the byte string,
including the start/end flags, and then using modulo 16 on this result.</p>
</section>
<section id="packet-listing">
<h2>Packet Listing<a class="headerlink" href="#packet-listing" title="Permalink to this heading">¶</a></h2>
<p>Below is a listing of all available packets.</p>
<div class="table-wrapper"><table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 14%" />
<col style="width: 74%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Message ID</p></th>
<th class="head"><p>Subclass ID</p></th>
<th class="head"><p>Class</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>0x00
(Meta)</p></td>
<td><p>0x00</p></td>
<td><p><a class="reference internal" href="#mil_usb_to_can.NackPacket" title="mil_usb_to_can.NackPacket"><code class="xref py py-class docutils literal notranslate"><span class="pre">mil_usb_to_can.NackPacket</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><a class="reference internal" href="#mil_usb_to_can.AckPacket" title="mil_usb_to_can.AckPacket"><code class="xref py py-class docutils literal notranslate"><span class="pre">mil_usb_to_can.AckPacket</span></code></a></p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p>0x01
(Thrust/
Kill)</p></td>
<td><p>0x00</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_thrust_and_kill_board.HeartbeatPacket</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_thrust_and_kill_board.ThrustSetPacket</span></code></p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_thrust_and_kill_board.KillSetPacket</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x03</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_thrust_and_kill_board.KillReceivePacket</span></code></p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>0x02
(Battery
Monitor)</p></td>
<td><p>0x00</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_battery_monitor_board.BatteryPollRequestPacket</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_battery_monitor_board.BatteryPollResponsePacket</span></code></p></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>0x03
(Actuator
Board)</p></td>
<td><p>0x00</p></td>
<td><p><a class="reference internal" href="../subjugator/reference.html#sub8_actuator_board.ActuatorSetPacket" title="sub8_actuator_board.ActuatorSetPacket"><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_actuator_board.ActuatorSetPacket</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>0x01</p></td>
<td><p><a class="reference internal" href="../subjugator/reference.html#sub8_actuator_board.ActuatorPollRequestPacket" title="sub8_actuator_board.ActuatorPollRequestPacket"><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_actuator_board.ActuatorPollRequestPacket</span></code></a></p></td>
</tr>
<tr class="row-even"><td><p>0x02</p></td>
<td><p><a class="reference internal" href="../subjugator/reference.html#sub8_actuator_board.ActuatorPollResponsePacket" title="sub8_actuator_board.ActuatorPollResponsePacket"><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_actuator_board.ActuatorPollResponsePacket</span></code></a></p></td>
</tr>
<tr class="row-odd"><td><p>0x04
(System
Status)</p></td>
<td><p>0x00</p></td>
<td><p><code class="xref py py-class docutils literal notranslate"><span class="pre">sub8_system_status_board.SetLedRequestPacket</span></code></p></td>
</tr>
</tbody>
</table>
</div></section>
<section id="candevicehandle">
<h2>CANDeviceHandle<a class="headerlink" href="#candevicehandle" title="Permalink to this heading">¶</a></h2>
<div class="attribute-table" data-move-to-id="mil_usb_to_can.CANDeviceHandle"><div class="attribute-table-column">
<span>
Methods</span><ul>
<li class="attribute-table-entry">
<span class="attribute-table-badge" title="method">
def</span><a class="reference internal" href="#mil_usb_to_can.CANDeviceHandle.on_data">on_data</a></li><li class="attribute-table-entry">
<span class="attribute-table-badge" title="method">
def</span><a class="reference internal" href="#mil_usb_to_can.CANDeviceHandle.send_data">send_data</a></li></ul>
</div></div><dl class="py class">
<dt class="sig sig-object py" id="mil_usb_to_can.CANDeviceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mil_usb_to_can.</span></span><span class="sig-name descname"><span class="pre">CANDeviceHandle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">driver</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">USBtoCANDriver</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mil_usb_to_can/device.html#CANDeviceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.CANDeviceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class to allow developers to write handles for communication with a
particular CAN device. The two methods of the handle allow the handle to listen
to incoming data, as well as send data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>driver</strong> (<em>USBtoCANBoard</em>) – Driver that is used to communicate with the board.</p></li>
<li><p><strong>device_id</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The CAN ID of the device this class will handle. Not currently used.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mil_usb_to_can.CANDeviceHandle.on_data">
<span class="sig-name descname"><span class="pre">on_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><span class="pre">Packet</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mil_usb_to_can/device.html#CANDeviceHandle.on_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.CANDeviceHandle.on_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when a return packet is sent over the serial connection. In the
USB to CAN protocol, it is assumed that packets will be returned to the
motherboard in the order they are sent out. Therefore, the type of packet
sent through this event is not guaranteed, and is only determined by the
message and subclass ID sent by the individual board.</p>
<p>Partial data (ie, incomplete packets) are not sent through this event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>packet</strong> (<a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><em>Packet</em></a>) – The incoming packet.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mil_usb_to_can.CANDeviceHandle.send_data">
<span class="sig-name descname"><span class="pre">send_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><span class="pre">Packet</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mil_usb_to_can/device.html#CANDeviceHandle.send_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.CANDeviceHandle.send_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends a packet over the serial connection.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>data</strong> (<a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><em>Packet</em></a>) – The packet to send.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="simulatedcandevicehandle">
<h2>SimulatedCANDeviceHandle<a class="headerlink" href="#simulatedcandevicehandle" title="Permalink to this heading">¶</a></h2>
<div class="attribute-table" data-move-to-id="mil_usb_to_can.SimulatedCANDeviceHandle"><div class="attribute-table-column">
<span>
Attributes</span><ul>
<li class="attribute-table-entry">
<a class="reference internal" href="#mil_usb_to_can.SimulatedCANDeviceHandle.inbound_packets">inbound_packets</a></li></ul>
</div><div class="attribute-table-column">
<span>
Methods</span><ul>
<li class="attribute-table-entry">
<span class="attribute-table-badge" title="method">
def</span><a class="reference internal" href="#mil_usb_to_can.SimulatedCANDeviceHandle.on_data">on_data</a></li><li class="attribute-table-entry">
<span class="attribute-table-badge" title="method">
def</span><a class="reference internal" href="#mil_usb_to_can.SimulatedCANDeviceHandle.send_data">send_data</a></li></ul>
</div></div><dl class="py class">
<dt class="sig sig-object py" id="mil_usb_to_can.SimulatedCANDeviceHandle">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mil_usb_to_can.</span></span><span class="sig-name descname"><span class="pre">SimulatedCANDeviceHandle</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sim_board</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">SimulatedUSBtoCANStream</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inbound_packets</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#list" title="(in Python v3.8)"><span class="pre">list</span></a><span class="p"><span class="pre">[</span></span><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#type" title="(in Python v3.8)"><span class="pre">type</span></a><span class="p"><span class="pre">[</span></span><a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><span class="pre">Packet</span></a><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mil_usb_to_can/device.html#SimulatedCANDeviceHandle"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.SimulatedCANDeviceHandle" title="Permalink to this definition">¶</a></dt>
<dd><p>Simulates a CAN device, with functions to be overridden to handle data requests
and sends from motherboard.</p>
<p>Child classes can inherit from this class to implement a simulated CAN device.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="mil_usb_to_can.SimulatedCANDeviceHandle.inbound_packets">
<span class="sig-name descname"><span class="pre">inbound_packets</span></span><a class="headerlink" href="#mil_usb_to_can.SimulatedCANDeviceHandle.inbound_packets" title="Permalink to this definition">¶</a></dt>
<dd><p>The types of packets listened to by this device.
Packets of this type will be routed to the <a class="reference internal" href="#mil_usb_to_can.SimulatedCANDeviceHandle.on_data" title="mil_usb_to_can.SimulatedCANDeviceHandle.on_data"><code class="xref py py-meth docutils literal notranslate"><span class="pre">on_data()</span></code></a> method of
the device handle.</p>
<dl class="field-list simple">
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3.8/library/functions.html#type" title="(in Python v3.8)">type</a>[<a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet">Packet</a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mil_usb_to_can.SimulatedCANDeviceHandle.on_data">
<span class="sig-name descname"><span class="pre">on_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">packet</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><span class="pre">Packet</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mil_usb_to_can/device.html#SimulatedCANDeviceHandle.on_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.SimulatedCANDeviceHandle.on_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when an relevant incoming packet is received over the serial
connection. Relevant packets are those listed in <a class="reference internal" href="#mil_usb_to_can.SimulatedCANDeviceHandle.inbound_packets" title="mil_usb_to_can.SimulatedCANDeviceHandle.inbound_packets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">inbound_packets</span></code></a>.</p>
<p>Partial data (ie, incomplete packets) are not sent through this event.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>packet</strong> (<a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><em>Packet</em></a>) – The incoming packet.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="mil_usb_to_can.SimulatedCANDeviceHandle.send_data">
<span class="sig-name descname"><span class="pre">send_data</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#bytes" title="(in Python v3.8)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/mil_usb_to_can/device.html#SimulatedCANDeviceHandle.send_data"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.SimulatedCANDeviceHandle.send_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Sends data over the serial connection.</p>
</dd></dl>

</dd></dl>

</section>
<section id="packet">
<h2>Packet<a class="headerlink" href="#packet" title="Permalink to this heading">¶</a></h2>
<div class="attribute-table" data-move-to-id="mil_usb_to_can.Packet"><div class="attribute-table-column">
<span>
Methods</span><ul>
<li class="attribute-table-entry">
<span class="attribute-table-badge" title="classmethod">
cls</span><a class="reference internal" href="#mil_usb_to_can.Packet.from_bytes">Packet.from_bytes</a></li></ul>
</div></div><dl class="py class">
<dt class="sig sig-object py" id="mil_usb_to_can.Packet">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mil_usb_to_can.</span></span><span class="sig-name descname"><span class="pre">Packet</span></span><a class="reference internal" href="../_modules/mil_usb_to_can/packet.html#Packet"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.Packet" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents one packet sent or received by a device handle communicating to/from
the USB to CAN board. This class is able to handle packaging unique data
values into a <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#bytes" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object for sending over a data stream.</p>
<p>This class should be overridden to implement unique packet payloads. Note
that this class supports three subclass arguments to assign unique message IDs,
subclass IDs, and payload formats. Note that all subclasses must be decorated
with <code class="xref py py-meth docutils literal notranslate"><span class="pre">dataclasses.dataclass()</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">dataclasses</span> <span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span>
<span class="k">class</span> <span class="nc">ExamplePacket</span><span class="p">(</span><span class="n">Packet</span><span class="p">,</span> <span class="n">msg_id</span> <span class="o">=</span> <span class="mh">0x02</span><span class="p">,</span> <span class="n">subclass_id</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">,</span> <span class="n">payload_format</span> <span class="o">=</span> <span class="s2">&quot;BHHf&quot;</span><span class="p">):</span>
    <span class="n">example_char</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">example_short</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">example_short_two</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">example_float</span><span class="p">:</span> <span class="nb">float</span>
</pre></div>
</div>
<div class="operations docutils container">
<dl class="describe">
<dt class="sig sig-object">
<span class="sig-name descname"><span class="pre">bytes(x)</span></span></dt>
<dd><p>Returns a <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#bytes" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object representing the data of the packet
in the specified packet format.</p>
</dd></dl>

</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>msg_id</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The message ID. Can be between 0 and 255.</p></li>
<li><p><strong>subclass_id</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – The message subclass ID. Can be between 0 and 255.</p></li>
<li><p><strong>payload_format</strong> (<a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – The format for the payload. This determines how
the individual payload is assembled. Each character in the format
string represents the position of one class variable. The class variables
are assembled in the order they are defined in.</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="mil_usb_to_can.Packet.from_bytes">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_bytes</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">packed</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#bytes" title="(in Python v3.8)"><span class="pre">bytes</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.packet.Packet"><span class="pre">Packet</span></a></span></span><a class="reference internal" href="../_modules/mil_usb_to_can/packet.html#Packet.from_bytes"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.Packet.from_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>Constructs a packet from a packed packet in a <a class="reference external" href="https://docs.python.org/3.8/library/stdtypes.html#bytes" title="(in Python v3.8)"><code class="xref py py-class docutils literal notranslate"><span class="pre">bytes</span></code></a> object.
If a packet is found with the corresponding message and subclass ID,
then an instance of that packet class will be returned, else <a class="reference internal" href="#mil_usb_to_can.Packet" title="mil_usb_to_can.Packet"><code class="xref py py-class docutils literal notranslate"><span class="pre">Packet</span></code></a>
will be returned.</p>
</dd></dl>

</dd></dl>

</section>
<section id="specific-packets">
<h2>Specific Packets<a class="headerlink" href="#specific-packets" title="Permalink to this heading">¶</a></h2>
<section id="nackpacket">
<h3>NackPacket<a class="headerlink" href="#nackpacket" title="Permalink to this heading">¶</a></h3>
<div class="attribute-table" data-move-to-id="mil_usb_to_can.NackPacket"></div><dl class="py class">
<dt class="sig sig-object py" id="mil_usb_to_can.NackPacket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mil_usb_to_can.</span></span><span class="sig-name descname"><span class="pre">NackPacket</span></span><a class="reference internal" href="../_modules/mil_usb_to_can/packet.html#NackPacket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.NackPacket" title="Permalink to this definition">¶</a></dt>
<dd><p>Common not-acknowledged packet. Should only be found in response operations.</p>
</dd></dl>

</section>
<section id="ackpacket">
<h3>AckPacket<a class="headerlink" href="#ackpacket" title="Permalink to this heading">¶</a></h3>
<div class="attribute-table" data-move-to-id="mil_usb_to_can.AckPacket"></div><dl class="py class">
<dt class="sig sig-object py" id="mil_usb_to_can.AckPacket">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">mil_usb_to_can.</span></span><span class="sig-name descname"><span class="pre">AckPacket</span></span><a class="reference internal" href="../_modules/mil_usb_to_can/packet.html#AckPacket"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mil_usb_to_can.AckPacket" title="Permalink to this definition">¶</a></dt>
<dd><p>Common acknowledgment packet. Should only be found in response operations.</p>
</dd></dl>

</section>
</section>
</section>


            </main>
        </div>
    </body>
</html>