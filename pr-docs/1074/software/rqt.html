<!DOCTYPE html>
<!-- Some pieces of this template were used from https://github.com/Rapptz/discord.py/blob/master/docs/_templates/layout.html -->
<html>
    <head>
        <!-- HTML meta -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale: 1.0">
        <title>Implementing GUI Based Tools Using rqt</title>
        <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
        <link rel="stylesheet" href="../_static/codeblocks.css" type="text/css" />
        <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
        <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../searchindex.js" defer></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script src="../_static/custom.js"></script>
        <script src="../_static/sidebar.js"></script>
        <script src="../_static/lightdarkmode.js"></script>
        <link rel="shortcut icon" href="../_static/mil_white.svg"/>
        <link rel="index" title="Index" href="../genindex.html" />
        <link rel="search" title="Search" href="../search.html" />
        <link rel="next" title="Writing Unit Tests with rostest" href="rostest.html" />
        <link rel="prev" title="An Introduction to Asyncio" href="asyncio.html" />
    </head>
    <body>
        <div class="main-grid">
            <header class="grid-item">
                <nav>
                    <a class="main-heading" href="../index.html">Machine Intelligence Lab</a>
                    <div id="mil-light-dark-icon" onClick="rotateLightDark();">
                        <span class="material-icons" title=""></span>
                    </div>
                    <a href="https://github.com/uf-mil/mil" target="_blank"><img class="mil-svg" src="../_static/github.svg" /></a>
                    <a href="https://mil.ufl.edu" target="_blank"><img class="mil-svg" src="../_static/mil.svg" /></a>
                </nav>
            </header>
            <aside class="grid-item">
                <span id="hamburger-toggle">
                    <span class="material-icons">menu</span>
                </span>
                <div id="sidebar"><form id="search-form" role="search" class="search" action="../search.html" method="get">
    <div class="search-wrapper">
        <input type="search" name="q" placeholder="Search documentation" />
        <button type="submit" onmousedown="searchBarClick(event, document.getElementById('search-form'));">
            <span class="material-icons">search</span>
        </button>
    </div>
</form>
<h3><a href="../index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../welcome.html">Welcome to MIL!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../mechanical/index.html">Mechanical</a></li>
<li class="toctree-l1"><a class="reference internal" href="../electrical/index.html">Electrical</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Software</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="devtools.html">Developer Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">Contributing Changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation_syntax.html">Documentation Syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="adding_documentation.html">Updating Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="help.html">Getting Help</a></li>
<li class="toctree-l2"><a class="reference internal" href="zobelisk.html">Accessing Zobelisk</a></li>
<li class="toctree-l2"><a class="reference internal" href="asyncio.html">An Introduction to Asyncio</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Implementing GUI Based Tools Using <code class="docutils literal notranslate"><span class="pre">rqt</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#benefits-of-rqt">Benefits of RQT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-started">Getting Started</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#launching-rqt">Launching RQT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#monitoring-information-with-rqt">Monitoring Information with RQT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#subscribing-to-specific-topics">Subscribing to Specific Topics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#displaying-data-with-plot-plugin">Displaying Data with Plot Plugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-rqt">Configuring RQT</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#theme-configuration">Theme Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="#layout-configuration">Layout Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#writing-rqt-plugins">Writing RQT Plugins</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plugin-structure">Plugin Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#implementing-a-basic-plugin">Implementing a Basic Plugin</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#step-1-create-the-plugin-package">Step 1: Create the Plugin Package</a></li>
<li class="toctree-l5"><a class="reference internal" href="#step-2-implement-the-plugin-code">Step 2: Implement the Plugin Code</a></li>
<li class="toctree-l5"><a class="reference internal" href="#step-3-add-the-plugin-xml-file">Step 3: Add the Plugin XML File</a></li>
<li class="toctree-l5"><a class="reference internal" href="#step-4-build-the-plugin">Step 4: Build the Plugin</a></li>
<li class="toctree-l5"><a class="reference internal" href="#step-5-launch-rqt-and-load-the-plugin">Step 5: Launch RQT and Load the Plugin</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#adding-custom-functionality">Adding Custom Functionality</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#implementing-a-more-advanced-plugin">Implementing a More Advanced Plugin</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">Step 1: Create the Plugin Package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">Step 2: Implement the Plugin Code</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id3">Step 3: Add the Plugin XML File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id4">Step 4: Build the Plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Step 5: Launch RQT and Load the Plugin</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Adding Custom Functionality</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#external-resources">External Resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="rostest.html">Writing Unit Tests with <code class="docutils literal notranslate"><span class="pre">rostest</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_style.html">Bash Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="cpp_style.html">C++ Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_style.html">Python Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo_guide.html">Gazebo Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="noetic_migration.html">Migrating to ROS Noetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="rtx_2080_drivers.html">Installing NVIDIA Drivers for RTX 2080</a></li>
<li class="toctree-l2"><a class="reference internal" href="apple_mseries_ubuntu_setup.html">Installing Ubuntu 18.04 on an M-series Apple computer</a></li>
<li class="toctree-l2"><a class="reference internal" href="resetubuntupass.html">Resetting Ubuntu Administrative Password</a></li>
<li class="toctree-l2"><a class="reference internal" href="../infrastructure/network.html">Network with Vehicles and Simulation Servers</a></li>
<li class="toctree-l2"><a class="reference internal" href="calibrating_cams.html">Calibrating Cameras</a></li>
<li class="toctree-l2"><a class="reference internal" href="submodule.html">Developing with Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="extension_support.html">Optional Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="scripts.html">Helpful Scripts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../subjugator/index.html">SubjuGator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigator/index.html">NaviGator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Software Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subjugator/reference.html">Subjugator Software Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../navigator/reference.html">Navigator Software Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design/design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../infrastructure/index.html">Infrastructure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../culture.html">Culture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../branding.html">Branding</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testingprocedures.html">SubjuGator Testing Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deprecated.html">Deprecated Projects</a></li>
</ul>

                </div>
            </aside>
            <main class="grid-item" role="main">
                
  <section id="implementing-gui-based-tools-using-rqt">
<h1>Implementing GUI Based Tools Using <code class="docutils literal notranslate"><span class="pre">rqt</span></code><a class="headerlink" href="#implementing-gui-based-tools-using-rqt" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>RQT (ROS Qt-based GUI Framework) is a powerful tool that provides a graphical
user interface for ROS (Robot Operating System) applications. It allows users
to monitor ROS topics, interact with nodes, visualize data, and more. This
document serves as a user guide for understanding and effectively using RQT.</p>
<section id="benefits-of-rqt">
<h3>Benefits of RQT<a class="headerlink" href="#benefits-of-rqt" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Graphical Interface</strong>: RQT provides a user-friendly graphical interface,
making it easier to visualize data, monitor topics, and interact with nodes.
This is especially helpful for users who prefer a GUI based approach over
the command line.</p></li>
<li><p><strong>Centralized Tool</strong>: RQT serves as a centralized tool for various ROS tasks,
including visualization, configuration, and debugging. This reduces the need
to switch between multiple terminals and tools, streamlining the development
process.</p></li>
<li><p><strong>Extensibility</strong>: RQT’s plugin architecture allows users to create custom
plugins to tailor the tool to their specific application needs. This
extensibility significantly enhances RQT’s capabilities and to various
robotic systems.</p></li>
<li><p><strong>Integration with ROS</strong>: RQT is tightly integrated with ROS, ensuring
seamless interaction with ROS nodes, topics, and services. This integration
simplifies the process of debugging and analyzing data in real-time.</p></li>
</ul>
</section>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>Before using RQT, make sure you have ROS installed on your system. If ROS is
not yet installed, follow the official ROS installation guide for your
operating system. Once ROS is installed, you can install RQT using the package
manager:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>ros-noetic-rqt
</pre></div>
</div>
</section>
<section id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading">¶</a></h2>
<section id="launching-rqt">
<h3>Launching RQT<a class="headerlink" href="#launching-rqt" title="Permalink to this heading">¶</a></h3>
<p>To launch RQT, open a terminal and run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rqt
</pre></div>
</div>
<p>This command will launch the RQT Graphical User Interface, displaying a
default layout with available plugins.</p>
</section>
</section>
<section id="monitoring-information-with-rqt">
<h2>Monitoring Information with RQT<a class="headerlink" href="#monitoring-information-with-rqt" title="Permalink to this heading">¶</a></h2>
<p>RQT provides various plugins to monitor information published on specific ROS
topics. The most common plugin for this purpose is the Plot plugin.</p>
<section id="subscribing-to-specific-topics">
<h3>Subscribing to Specific Topics<a class="headerlink" href="#subscribing-to-specific-topics" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Open RQT using the command mentioned in the previous section.</p></li>
<li><p>Click on the “Plugins” menu in the top toolbar and select “Topics” &gt;
“Message Publisher.”</p></li>
<li><p>A new “Message Publisher” tab will appear. Click on the “+” button to
subscribe to a specific topic.</p></li>
<li><p>Choose the desired topic from the list and click “OK.”</p></li>
<li><p>Now, you can monitor the information published on the selected topic in
real-time.</p></li>
</ol>
</section>
<section id="displaying-data-with-plot-plugin">
<h3>Displaying Data with Plot Plugin<a class="headerlink" href="#displaying-data-with-plot-plugin" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Open RQT using the command mentioned earlier.</p></li>
<li><p>Click on the “Plugins” menu in the top toolbar and select
“Visualization” &gt; “Plot.”</p></li>
<li><p>A new “Plot” tab will appear. Click on the “+” button to add a plot.</p></li>
<li><p>Choose the topic you want to visualize from the list, select the message
field, and click “OK.”</p></li>
<li><p>The plot will start displaying the data sent over the selected topic.</p></li>
</ol>
</section>
</section>
<section id="configuring-rqt">
<h2>Configuring RQT<a class="headerlink" href="#configuring-rqt" title="Permalink to this heading">¶</a></h2>
<p>RQT allows users to customize its appearance and layout to suit their preferences.</p>
<section id="theme-configuration">
<h3>Theme Configuration<a class="headerlink" href="#theme-configuration" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Open RQT using the command mentioned earlier.</p></li>
<li><p>Click on the “View” menu in the top toolbar and select “Settings.”</p></li>
<li><p>In the “Settings” window, go to the “Appearance” tab.</p></li>
<li><p>Here, you can change the color scheme, font size, and other visual settings.</p></li>
</ol>
</section>
<section id="layout-configuration">
<h3>Layout Configuration<a class="headerlink" href="#layout-configuration" title="Permalink to this heading">¶</a></h3>
<ol class="arabic simple">
<li><p>Open RQT using the command mentioned earlier.</p></li>
<li><p>Rearrange existing plugins by clicking on their tab and dragging them to
a new position.</p></li>
<li><p>To create a new tab, right-click on any existing tab and select “Add New Tab.”</p></li>
<li><p>Drag and drop desired plugins onto the new tab.</p></li>
<li><p>Save your customized layout by going to the “View” menu and selecting
“Perspectives” &gt; “Save Perspective.”</p></li>
</ol>
</section>
</section>
<section id="writing-rqt-plugins">
<h2>Writing RQT Plugins<a class="headerlink" href="#writing-rqt-plugins" title="Permalink to this heading">¶</a></h2>
<p>RQT allows users to create their custom plugins to extend its functionality.
Writing RQT plugins is essential when the available plugins do not fully
meet your application’s requirements.</p>
<section id="plugin-structure">
<h3>Plugin Structure<a class="headerlink" href="#plugin-structure" title="Permalink to this heading">¶</a></h3>
<p>To write an RQT plugin, you need to follow a specific directory structure and
include Python or C++ code to implement the plugin’s functionality. The
essential components of an RQT plugin are:</p>
<ul class="simple">
<li><p><strong>Plugin XML (<code class="docutils literal notranslate"><span class="pre">plugin.xml</span></code>)</strong>: This file defines the plugin and its
dependencies, specifying essential information like name, description,
and which ROS packages it depends on.</p></li>
<li><p><strong>Python or C++ Code</strong>: This code contains the actual implementation of the
plugin’s functionality. For Python plugins, the code should extend the
<code class="docutils literal notranslate"><span class="pre">rqt_gui_py::Plugin</span></code> class, while for C++ plugins, it should extend the
<code class="docutils literal notranslate"><span class="pre">rqt_gui_cpp::Plugin</span></code> class.</p></li>
</ul>
</section>
<section id="implementing-a-basic-plugin">
<h3>Implementing a Basic Plugin<a class="headerlink" href="#implementing-a-basic-plugin" title="Permalink to this heading">¶</a></h3>
<p>In this section, we will walk through an example of implementing a basic RQT
plugin. We will create a simple plugin to display the current time published
by a ROS topic. The plugin will consist of a label that updates with the
current time whenever a new message is received.</p>
<section id="step-1-create-the-plugin-package">
<h4>Step 1: Create the Plugin Package<a class="headerlink" href="#step-1-create-the-plugin-package" title="Permalink to this heading">¶</a></h4>
<p>Create a new ROS package for your plugin using the <code class="docutils literal notranslate"><span class="pre">catkin_create_pkg</span></code> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin_create_pkg<span class="w"> </span>my_rqt_plugin<span class="w"> </span>rospy<span class="w"> </span>rqt_gui_py
</pre></div>
</div>
<p>The package dependencies <code class="docutils literal notranslate"><span class="pre">rospy</span></code> and <code class="docutils literal notranslate"><span class="pre">rqt_gui_py</span></code> are required to work with
ROS and create a Python-based RQT plugin.</p>
</section>
<section id="step-2-implement-the-plugin-code">
<h4>Step 2: Implement the Plugin Code<a class="headerlink" href="#step-2-implement-the-plugin-code" title="Permalink to this heading">¶</a></h4>
<p>Next, create a Python script for your plugin. In the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory of your
package, create a file named <code class="docutils literal notranslate"><span class="pre">my_rqt_plugin.py</span></code> with the following content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">rqt_gui_py.plugin</span> <span class="kn">import</span> <span class="n">Plugin</span>
<span class="kn">from</span> <span class="nn">python_qt_binding.QtWidgets</span> <span class="kn">import</span> <span class="n">QLabel</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QWidget</span>
<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">String</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">class</span> <span class="nc">MyRqtPlugin</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">MyRqtPlugin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s1">&#39;MyRqtPlugin&#39;</span><span class="p">)</span>

        <span class="c1"># Create the main widget and layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="c1"># Create a label to display the current time</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span> <span class="o">=</span> <span class="n">QLabel</span><span class="p">(</span><span class="s2">&quot;Current Time: N/A&quot;</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="p">)</span>

        <span class="c1"># Subscribe to the topic that provides the current time</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s1">&#39;/current_time&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_time</span><span class="p">)</span>

        <span class="c1"># Add the widget to the context</span>
        <span class="n">context</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_time</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="c1"># Update the label with the received time message</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_label</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Current Time: </span><span class="si">{</span><span class="n">msg</span><span class="o">.</span><span class="n">data</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">shutdown_plugin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Unregister the subscriber when the plugin is shut down</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="s1">&#39;/current_time&#39;</span><span class="p">,</span> <span class="n">String</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_update_time</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin_settings</span><span class="p">,</span> <span class="n">instance_settings</span><span class="p">):</span>
        <span class="c1"># Save the plugin&#39;s settings when needed</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">restore_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin_settings</span><span class="p">,</span> <span class="n">instance_settings</span><span class="p">):</span>
        <span class="c1"># Restore the plugin&#39;s settings when needed</span>
        <span class="k">pass</span>

</pre></div>
</div>
<p>In this code, we create a plugin class named <code class="docutils literal notranslate"><span class="pre">MyRqtPlugin</span></code>, which inherits
from <code class="docutils literal notranslate"><span class="pre">rqt_gui_py.Plugin</span></code>. The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method sets up the GUI elements, such
as a label, and subscribes to the <code class="docutils literal notranslate"><span class="pre">/current_time</span></code> topic to receive time updates.</p>
</section>
<section id="step-3-add-the-plugin-xml-file">
<h4>Step 3: Add the Plugin XML File<a class="headerlink" href="#step-3-add-the-plugin-xml-file" title="Permalink to this heading">¶</a></h4>
<p>Create a file named <code class="docutils literal notranslate"><span class="pre">plugin.xml</span></code> in the root of your package to define the
plugin. Add the following content to the <code class="docutils literal notranslate"><span class="pre">plugin.xml</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;library</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;src&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;class</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;MyRqtPlugin&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;my_rqt_plugin.MyRqtPlugin&quot;</span><span class="w"> </span><span class="na">base_class_type=</span><span class="s">&quot;rqt_gui_py::Plugin&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;description&gt;</span>
<span class="w">      </span>A<span class="w"> </span>custom<span class="w"> </span>RQT<span class="w"> </span>plugin<span class="w"> </span>to<span class="w"> </span>display<span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span>time.
<span class="w">    </span><span class="nt">&lt;/description&gt;</span>
<span class="w">    </span><span class="nt">&lt;qtgui&gt;</span>
<span class="w">      </span><span class="nt">&lt;label&gt;</span>My<span class="w"> </span>RQT<span class="w"> </span>Plugin<span class="nt">&lt;/label&gt;</span>
<span class="w">      </span><span class="nt">&lt;icon</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;theme&quot;</span><span class="nt">&gt;</span>settings<span class="nt">&lt;/icon&gt;</span>
<span class="w">      </span><span class="nt">&lt;statustip&gt;</span>Display<span class="w"> </span>the<span class="w"> </span>current<span class="w"> </span>time.<span class="nt">&lt;/statustip&gt;</span>
<span class="w">    </span><span class="nt">&lt;/qtgui&gt;</span>
<span class="w">  </span><span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/library&gt;</span>
</pre></div>
</div>
<p>This XML file defines the plugin class, its description, and the icon to be
displayed in the RQT GUI.</p>
</section>
<section id="step-4-build-the-plugin">
<h4>Step 4: Build the Plugin<a class="headerlink" href="#step-4-build-the-plugin" title="Permalink to this heading">¶</a></h4>
<p>Build your plugin package using <code class="docutils literal notranslate"><span class="pre">catkin_make</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin_make
</pre></div>
</div>
</section>
<section id="step-5-launch-rqt-and-load-the-plugin">
<h4>Step 5: Launch RQT and Load the Plugin<a class="headerlink" href="#step-5-launch-rqt-and-load-the-plugin" title="Permalink to this heading">¶</a></h4>
<p>Launch RQT using the command mentioned earlier:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rqt
</pre></div>
</div>
<p>Once RQT is open, navigate to the “Plugins” menu and select “My RQT Plugin”
from the list. The plugin will be loaded, and you should see the label
displaying the current time.</p>
</section>
</section>
<section id="adding-custom-functionality">
<h3>Adding Custom Functionality<a class="headerlink" href="#adding-custom-functionality" title="Permalink to this heading">¶</a></h3>
<p>The example plugin we implemented is a simple demonstration of how to create
an RQT plugin. Depending on your application’s requirements, you can add more
sophisticated features, such as custom data visualization, interactive
controls, and integration with other ROS elements.</p>
<p>You can also improve the plugin by adding error handling, additional options
for time formatting, and the ability to pause/resume the time updates.</p>
</section>
</section>
<section id="implementing-a-more-advanced-plugin">
<h2>Implementing a More Advanced Plugin<a class="headerlink" href="#implementing-a-more-advanced-plugin" title="Permalink to this heading">¶</a></h2>
<p>In this section, we will implement a more advanced RQT plugin that visualizes
data from multiple ROS topics using a 2D plot. This plugin will allow users to
choose which topics to plot and specify the message field to display on the X
and Y axes. Let’s call this plugin “ROS Data Plotter.”</p>
<section id="id1">
<h3>Step 1: Create the Plugin Package<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h3>
<p>Create a new ROS package for your plugin using the <code class="docutils literal notranslate"><span class="pre">catkin_create_pkg</span></code> command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin_create_pkg<span class="w"> </span>ros_data_plotter<span class="w"> </span>rospy<span class="w"> </span>rqt_gui_py<span class="w"> </span>matplotlib
</pre></div>
</div>
<p>The package dependencies <code class="docutils literal notranslate"><span class="pre">rospy</span></code>, <code class="docutils literal notranslate"><span class="pre">rqt_gui_py</span></code>, and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> are required
to work with ROS, create a Python-based RQT plugin, and plot data, respectively.</p>
</section>
<section id="id2">
<h3>Step 2: Implement the Plugin Code<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h3>
<p>Next, create a Python script for your plugin. In the <code class="docutils literal notranslate"><span class="pre">src</span></code> directory of your
package, create a file named <code class="docutils literal notranslate"><span class="pre">ros_data_plotter.py</span></code> with the following content:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env python</span>

<span class="kn">import</span> <span class="nn">rospy</span>
<span class="kn">from</span> <span class="nn">rqt_gui_py.plugin</span> <span class="kn">import</span> <span class="n">Plugin</span>
<span class="kn">from</span> <span class="nn">python_qt_binding.QtWidgets</span> <span class="kn">import</span> <span class="n">QWidget</span><span class="p">,</span> <span class="n">QVBoxLayout</span><span class="p">,</span> <span class="n">QComboBox</span>
<span class="kn">from</span> <span class="nn">matplotlib.backends.backend_qt5agg</span> <span class="kn">import</span> <span class="n">FigureCanvasQTAgg</span> <span class="k">as</span> <span class="n">FigureCanvas</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">from</span> <span class="nn">std_msgs.msg</span> <span class="kn">import</span> <span class="n">Float32</span>  <span class="c1"># Modify this import based on your data type</span>

<span class="k">class</span> <span class="nc">ROSDataPlotter</span><span class="p">(</span><span class="n">Plugin</span><span class="p">):</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ROSDataPlotter</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setObjectName</span><span class="p">(</span><span class="s1">&#39;ROSDataPlotter&#39;</span><span class="p">)</span>

        <span class="c1"># Create the main widget and layout</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span> <span class="o">=</span> <span class="n">QWidget</span><span class="p">()</span>
        <span class="n">layout</span> <span class="o">=</span> <span class="n">QVBoxLayout</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">layout</span><span class="p">)</span>

        <span class="c1"># Create a combo box to select topics and message fields</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_topic_field_selector</span> <span class="o">=</span> <span class="n">QComboBox</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_topic_field_selector</span><span class="o">.</span><span class="n">currentIndexChanged</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_plot</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_topic_field_selector</span><span class="p">)</span>

        <span class="c1"># Create the matplotlib figure and plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_figure</span> <span class="o">=</span> <span class="n">Figure</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span> <span class="o">=</span> <span class="n">FigureCanvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_figure</span><span class="p">)</span>
        <span class="n">layout</span><span class="o">.</span><span class="n">addWidget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="p">)</span>

        <span class="c1"># Initialize the plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_update_plot</span><span class="p">()</span>

        <span class="c1"># Add the widget to the context</span>
        <span class="n">context</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_widget</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_update_plot</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Clear the previous plot data</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_figure</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>

        <span class="c1"># Get the selected topic and field from the combo box</span>
        <span class="n">selected_topic_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_topic_field_selector</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">topic</span><span class="p">,</span> <span class="n">field</span> <span class="o">=</span> <span class="n">selected_topic_field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>

        <span class="c1"># Subscribe to the selected topic</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_data</span><span class="p">)</span>  <span class="c1"># Modify this based on your data type</span>

    <span class="k">def</span> <span class="nf">_plot_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="c1"># Get the selected topic and field from the combo box</span>
        <span class="n">selected_topic_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_topic_field_selector</span><span class="o">.</span><span class="n">currentText</span><span class="p">()</span>
        <span class="n">topic</span><span class="p">,</span> <span class="n">field</span> <span class="o">=</span> <span class="n">selected_topic_field</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39; - &#39;</span><span class="p">)</span>

        <span class="c1"># Plot the data on the graph</span>
        <span class="c1"># Modify this part based on your data type and plot requirements</span>
        <span class="n">x_data</span> <span class="o">=</span> <span class="n">rospy</span><span class="o">.</span><span class="n">Time</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">to_sec</span><span class="p">()</span>  <span class="c1"># Use timestamp as X-axis</span>
        <span class="n">y_data</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">msg</span><span class="p">,</span> <span class="n">field</span><span class="p">)</span>  <span class="c1"># Use the specified field from the message as Y-axis data</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_figure</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span><span class="p">)</span>

        <span class="c1"># Refresh the plot</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">shutdown_plugin</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c1"># Unsubscribe from the topic when the plugin is shut down</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_topic_field_selector</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
        <span class="n">rospy</span><span class="o">.</span><span class="n">Subscriber</span><span class="p">(</span><span class="n">topic</span><span class="p">,</span> <span class="n">Float32</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_data</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">save_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin_settings</span><span class="p">,</span> <span class="n">instance_settings</span><span class="p">):</span>
        <span class="c1"># Save the plugin&#39;s settings when needed</span>
        <span class="k">pass</span>

    <span class="k">def</span> <span class="nf">restore_settings</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">plugin_settings</span><span class="p">,</span> <span class="n">instance_settings</span><span class="p">):</span>
        <span class="c1"># Restore the plugin&#39;s settings when needed</span>
        <span class="k">pass</span>

</pre></div>
</div>
<p>In this code, we create a plugin class named <code class="docutils literal notranslate"><span class="pre">ROSDataPlotter</span></code>, which inherits
from <code class="docutils literal notranslate"><span class="pre">rqt_gui_py.Plugin</span></code>. The <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method sets up the GUI elements,
such as a combo box to select topics and message fields, and the matplotlib
figure to plot the data. The <code class="docutils literal notranslate"><span class="pre">_update_plot</span></code> method updates the plot whenever
a new topic or message field is selected from the combo box. The <code class="docutils literal notranslate"><span class="pre">_plot_data</span></code>
method is called when new messages are received on the selected topic, and it
plots the data on the graph.</p>
</section>
<section id="id3">
<h3>Step 3: Add the Plugin XML File<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h3>
<p>Create a file named <code class="docutils literal notranslate"><span class="pre">plugin.xml</span></code> in the root of your package to define the
plugin. Add the following content to the <code class="docutils literal notranslate"><span class="pre">plugin.xml</span></code>:</p>
<div class="highlight-xml notranslate"><div class="highlight"><pre><span></span><span class="nt">&lt;library</span><span class="w"> </span><span class="na">path=</span><span class="s">&quot;src&quot;</span><span class="nt">&gt;</span>
<span class="w">  </span><span class="nt">&lt;class</span><span class="w"> </span><span class="na">name=</span><span class="s">&quot;ROSDataPlotter&quot;</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;ros_data_plotter.ros_data_plotter.ROSDataPlotter&quot;</span><span class="w"> </span><span class="na">base_class_type=</span><span class="s">&quot;rqt_gui_py::Plugin&quot;</span><span class="nt">&gt;</span>
<span class="w">    </span><span class="nt">&lt;description&gt;</span>
<span class="w">      </span>An<span class="w"> </span>advanced<span class="w"> </span>RQT<span class="w"> </span>plugin<span class="w"> </span>to<span class="w"> </span>plot<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>multiple<span class="w"> </span>ROS<span class="w"> </span>topics.
<span class="w">    </span><span class="nt">&lt;/description&gt;</span>
<span class="w">    </span><span class="nt">&lt;qtgui&gt;</span>
<span class="w">      </span><span class="nt">&lt;label&gt;</span>ROS<span class="w"> </span>Data<span class="w"> </span>Plotter<span class="nt">&lt;/label&gt;</span>
<span class="w">      </span><span class="nt">&lt;icon</span><span class="w"> </span><span class="na">type=</span><span class="s">&quot;theme&quot;</span><span class="nt">&gt;</span>settings<span class="nt">&lt;/icon&gt;</span>
<span class="w">      </span><span class="nt">&lt;statustip&gt;</span>Plot<span class="w"> </span>data<span class="w"> </span>from<span class="w"> </span>selected<span class="w"> </span>ROS<span class="w"> </span>topics.<span class="nt">&lt;/statustip&gt;</span>
<span class="w">    </span><span class="nt">&lt;/qtgui&gt;</span>
<span class="w">  </span><span class="nt">&lt;/class&gt;</span>
<span class="nt">&lt;/library&gt;</span>
</pre></div>
</div>
<p>This XML file defines the plugin class, its description, and the icon
to be displayed in the RQT GUI.</p>
</section>
<section id="id4">
<h3>Step 4: Build the Plugin<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h3>
<p>Build your plugin package using <code class="docutils literal notranslate"><span class="pre">catkin_make</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>catkin_make
</pre></div>
</div>
</section>
<section id="id5">
<h3>Step 5: Launch RQT and Load the Plugin<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h3>
<p>Launch RQT</p>
<p>using the command mentioned earlier:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rqt
</pre></div>
</div>
<p>Once RQT is open, navigate to the “Plugins” menu and select “ROS Data Plotter”
from the list. The plugin will be loaded, and you should see a combo box to
select topics and fields, and a graph to display the plotted data.</p>
</section>
<section id="id6">
<h3>Adding Custom Functionality<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h3>
<p>In this more advanced example, we created an RQT plugin that allows users to
plot data from multiple ROS topics. The example focused on plotting Float32
messages, but you can modify the <code class="docutils literal notranslate"><span class="pre">_plot_data</span></code> method to handle different
message types or plot multiple data series on the same graph.</p>
<p>You can further enhance the plugin by adding features like legends, axis
labels, custom plot styles, data smoothing, and real-time updates.
Additionally, you can provide options to save the plotted data as CSV
or images for further analysis.</p>
<p>With custom plugins, you have the freedom to tailor RQT to suit your
specific application’s visualization needs, making it a versatile tool
for ROS developers.</p>
</section>
</section>
<section id="external-resources">
<h2>External Resources<a class="headerlink" href="#external-resources" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.ros.org/rqt">ROS wiki page for rqt</a></p></li>
<li><p><a class="reference external" href="https://www.youtube.com/watch?v=o90IaCRje2I">GeorgiaTech RoboJacket’s rqt tutorial</a></p></li>
<li><p><a class="reference external" href="https://github.com/ChoKasem/rqt_tut">Creating Custom rqt Plugins</a></p></li>
</ul>
</section>
<section id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this heading">¶</a></h2>
<p>Congratulations! You have now learned the basics of using RQT, including
monitoring information sent over specific topics, configuring RQT to your
preferences, writing your custom plugins, and understanding the importance
of using RQT in ROS development. RQT provides a user-friendly and powerful
graphical interface for ROS applications, making it an essential tool for
developers and researchers working with ROS-based robotic systems. By
leveraging RQT’s capabilities, you can streamline your development process
and gain valuable insights into your robot’s behavior.</p>
</section>
</section>


            </main>
        </div>
    </body>
</html>